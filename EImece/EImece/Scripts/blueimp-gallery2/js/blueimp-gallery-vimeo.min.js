(function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(n,t){"use strict";if(!window.postMessage)return t;n.extend(t.prototype.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!0});var u=t.prototype.textFactory||t.prototype.imageFactory,i=function(n,t,i,r){this.url=n;this.videoId=t;this.playerId=i;this.clickToPlay=r;this.element=document.createElement("div");this.listeners={}},r=0;return n.extend(i.prototype,{canPlayType:function(){return!0},on:function(n,t){return this.listeners[n]=t,this},loadAPI:function(){for(var u=this,f="//"+(location.protocol==="https"?"secure-":"")+"a.vimeocdn.com/js/froogaloop2.min.js",i=document.getElementsByTagName("script"),r=i.length,t,e,o=function(){!e&&u.playOnReady&&u.play();e=!0};r;)if(r-=1,i[r].src===f){t=i[r];break}t||(t=document.createElement("script"),t.src=f);n(t).on("load",o);i[0].parentNode.insertBefore(t,i[0]);/loaded|complete/.test(t.readyState)&&o()},onReady:function(){var n=this;this.ready=!0;this.player.addEvent("play",function(){n.hasPlayed=!0;n.onPlaying()});this.player.addEvent("pause",function(){n.onPause()});this.player.addEvent("finish",function(){n.onPause()});this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause();delete this.playStatus},insertIframe:function(){var n=document.createElement("iframe");n.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId);n.id=this.playerId;this.element.parentNode.replaceChild(n,this.element);this.element=n},play:function(){var n=this;this.playStatus||(this.listeners.play(),this.playStatus=1);this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){n.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),n.extend(t.prototype,{VimeoPlayer:i,textFactory:function(n,t){var f=this.options,e=this.getItemProperty(n,f.vimeoVideoIdProperty);return e?(this.getItemProperty(n,f.urlProperty)===undefined&&(n[f.urlProperty]="//vimeo.com/"+e),r+=1,this.videoFactory(n,t,new i(f.vimeoPlayerUrl,e,f.vimeoPlayerIdPrefix+r,f.vimeoClickToPlay))):u.call(this,n,t)}}),t});