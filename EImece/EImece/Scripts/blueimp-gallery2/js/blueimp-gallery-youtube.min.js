(function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(n,t){"use strict";if(!window.postMessage)return t;n.extend(t.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var r=t.prototype.textFactory||t.prototype.imageFactory,i=function(n,t,i){this.videoId=n;this.playerVars=t;this.clickToPlay=i;this.element=document.createElement("div");this.listeners={}};return n.extend(i.prototype,{canPlayType:function(){return!0},on:function(n,t){return this.listeners[n]=t,this},loadAPI:function(){var r=this,u=window.onYouTubeIframeAPIReady,f="//www.youtube.com/iframe_api",n=document.getElementsByTagName("script"),t=n.length,i;for(window.onYouTubeIframeAPIReady=function(){u&&u.apply(this);r.playOnReady&&r.play()};t;)if(t-=1,n[t].src===f)return;i=document.createElement("script");i.src=f;n[0].parentNode.insertBefore(i,n[0])},onReady:function(){this.ready=!0;this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){t.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(n){switch(n.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0;this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=n.data},onError:function(n){this.listeners.error(n)},play:function(){var n=this;this.playStatus||(this.listeners.play(),this.playStatus=1);this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){n.onReady()},onStateChange:function(t){n.onStateChange(t)},onError:function(t){n.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),n.extend(t.prototype,{YouTubePlayer:i,textFactory:function(n,t){var u=this.options,f=this.getItemProperty(n,u.youTubeVideoIdProperty);return f?(this.getItemProperty(n,u.urlProperty)===undefined&&(n[u.urlProperty]="//www.youtube.com/watch?v="+f),this.getItemProperty(n,u.videoPosterProperty)===undefined&&(n[u.videoPosterProperty]="//img.youtube.com/vi/"+f+"/maxresdefault.jpg"),this.videoFactory(n,t,new i(f,u.youTubePlayerVars,u.youTubeClickToPlay))):r.call(this,n,t)}}),t});