@model EImece.Domain.Models.FrontModels.ProductDetailViewModel
@using EImece.Domain.Entities;
@using EImece.Domain.Helpers.HtmlHelpers;
@using EImece.Domain.Helpers.Extensions;
@using EImece.Domain.Helpers;
@using EImece.Domain;
@{
    var product = Model.Product;
    var isUserAuthenticated = User.Identity.IsAuthenticated && Settings.IsEditLinkEnable;
    ViewBag.Title = product.GetSeoTitle();
    ViewBag.Description = product.GetSeoDescription();
    ViewBag.Keywords = product.GetSeoKeywords();
    Layout = "~/Views/Shared/_Layout.cshtml";
    var productFiles = product.ProductFiles.ToList();
    var productTags = product.ProductTags.Select(r => r.Tag).ToList();
    var productCategory = product.ProductCategory;
    var productSpecs = product.ProductSpecifications;
    var relatedStories = Model.RelatedStories;
    var productMainImageId = product.MainImageId.HasValue ? product.MainImageId.Value : 0;
}



<section class="titlebar">
    <div class="container">
        <div class="sixteen columns">
            @Html.Partial("_ProductBreadCrumb", Model)
        </div>
    </div>
</section>

<div class="container">

    <!-- Slider
    ================================================== -->
    <div class="eight columns">
        <div class="slider-padding">
            <div id="product-slider" class="royalSlider rsDefault">
                @if (product.ImageState)
                {

                    <img class="rsImg" src="@product.GetCroppedImageUrl(productMainImageId, 454, 513)" data-rsTmb="@product.GetCroppedImageUrl(productMainImageId, 95,105)" alt="" />

                }
           
                   @for (int i = 0; i < productFiles.Count; i++)
                {
                    var f = productFiles[i];
                    <img class="rsImg" src="@f.GetCroppedImageUrl(f.FileStorageId, 454, 513)" data-rsTmb="@f.GetCroppedImageUrl(f.FileStorageId, 95,105)" alt="" />
                }
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    
    

    <!-- Content
    ================================================== -->
    <div class="eight columns">
        <div class="product-page">

            <!-- Headline -->
            <section class="title">
                <h2>@product.Name</h2>
                @if (isUserAuthenticated)
                {
                    @Html.ActionLink("edit","saveoredit","Products",new { @id=product.Id, @area="admin" },new {  })
                }
                <h4>
                    @product.ProductCategory.Name
                </h4>
                @*<span class="product-price-discount">@String.Format("${0}", product.Price)<i>@String.Format("${0}", product.GetProductPrice())</i></span>*@
 
            </section>

            <!-- Text Parapgraph -->
            <section>
                <p class="margin-reset">
                    @Html.Raw(product.Description)
                </p>
                <!-- Share Buttons -->
                <div class="share-buttons">
                    <ul>
                        <li><a href="#">Share</a></li>
                        <li class="share-facebook"><a href="#">Facebook</a></li>
                        <li class="share-twitter"><a href="#">Twitter</a></li>
                        <li class="share-gplus"><a href="#">Google Plus</a></li>
                        <li class="share-pinit"><a href="#">Pin It</a></li>
                    </ul>
                </div>
                <div class="clearfix"></div>

            </section>




        </div>
    </div>

</div>


<div class="container">
    <div class="sixteen columns">
        <!-- Tabs Navigation -->
        <ul class="tabs-nav">
            <li class="active"><a href="#tab1">Ürün Bilgisi</a></li>
            <li><a href="#tab2">Teknik Resimler</a></li>
            <li><a href="#tab3">Bu Ürün Hakkında Bilgi İstiyorum</span></a></li>
        </ul>

        <!-- Tabs Content -->
        <div class="tabs-container">

            <div class="tab-content" id="tab1">
                <p>
                    @Html.Raw(product.Description)
                </p>
            </div>

            <div class="tab-content" id="tab2">


                @Html.Partial("_ProductSpecs", Model)


            </div>

            <div class="tab-content" id="tab3">

                <!-- Reviews -->

                @Html.Action("ContactUs", "Home")




            </div>

        </div>
    </div>
</div>






@foreach (var pt in productTags)
{
    <div>
        @Html.ActionLink(pt.Name, "tag", "products", new { id = pt.GetSeoUrl() }, null)
    </div>
}

@if (relatedStories.Any())
{
    <h3>
        Related Stories
    </h3>
    foreach (var rs in relatedStories)
    {
        @Html.DisplayFor(r => rs, "StoryShort")
    }
}

