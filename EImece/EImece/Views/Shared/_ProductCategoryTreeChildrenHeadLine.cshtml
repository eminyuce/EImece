 @using EImece.Domain.Entities;
@using EImece.Domain.Helpers;
@using EImece.Domain.Helpers.Extensions;
@using EImece.Domain.Models.FrontModels;

@model List<ProductCategoryTreeModel>
@{
    var productCategories = Model;
    var firstProductCategory = Model.FirstOrDefault();
    var level = firstProductCategory!= null ?  firstProductCategory.TreeLevel : -1;
}

<ul class="@String.Format("parent-{0} has-sublist",level)">
    @foreach (var p in productCategories)
    {

        if (p.Childrens.Any())
        {
            <li class="@String.Format("child-{0} has-sublist",p.TreeLevel)">
                @Html.ActionLink(p.Text, "Category", "ProductCategories", new { id = p.ProductCategory.GetSeoUrl() }, new { @class = "btn btn-default" })
                @Html.Partial("_ProductCategoryTreeChildrenHeadLine", p.Childrens)
            </li>

        }
        else
        {

            <li>
                @Html.ActionLink(p.Text, "Category", "ProductCategories", new { id = p.ProductCategory.GetSeoUrl() }, new { @class = "btn btn-default" })
            </li>
        }
    }
</ul>