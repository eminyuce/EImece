@using EImece.Domain.Entities;
@using EImece.Domain.Helpers;
@using EImece.Domain.Helpers.Extensions;
@using EImece.Domain.Models.FrontModels;
@model MenuTreeModel

@{
    var m = Model;
}

@RenderMenuAction(m)

@helper RenderMenuAction(MenuTreeModel m)
{

    var p = m.MenuLink.Split("_".ToCharArray());
    var parts = p.First().Split("-".ToCharArray());
    var action = parts[1];
    var controller = parts[0];
    String mid = "";
    mid = p.Last();

    if (m.LinkIsActive && !String.IsNullOrEmpty(m.Link))
    {
        <a href="@m.Link">@m.Name</a>
    }
    else if (controller.Equals("pages", StringComparison.InvariantCultureIgnoreCase))
    {

        @Html.ActionLink(m.Name, "detail", controller, new
        {
        id = m.GetSeoUrl()
        }, null)

    }
    else if (controller.Equals("stories", StringComparison.InvariantCultureIgnoreCase)
                                                && action.Equals("categories", StringComparison.InvariantCultureIgnoreCase))
    {

        @Html.ActionLink(m.Name, action, controller, new
           {
               id = mid
           }, null)

    }
    else
    {

        @Html.ActionLink(m.Name, action, controller)

    }

}